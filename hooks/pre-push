#!/bin/sh

echo "git diff:"
CURRENT_BRANCH_NAME=`git branch --show-current`
FICHEROS=`git diff --stat --cached --name-only origin/$CURRENT_BRANCH_NAME`
FICHEROS=`echo $FICHEROS | egrep "*\.cpp|*\.ino|*\.h"`
if [ -z "${FICHEROS}" ]; then
  echo "Files not found"
else
  echo "files are:"
  echo "$FICHEROS"
  echo "Running astyle"
  astyle --options=./.astylerc ${FICHEROS}
  echo "Formatted"
fi
